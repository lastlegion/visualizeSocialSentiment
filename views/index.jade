extends layout

block content
    h1 
        Visualize Twitter Sentiments

    div(id="main")

    script(src="//cdnjs.cloudflare.com/ajax/libs/d3/3.4.13/d3.min.js")
    script.
        var tweets= [];
        var socket = io.connect("http://localhost");
        var svgContainers = d3.select("#main")
        .append("svg")
        .attr("width", 900)
        .attr("height", 500)

        socket.on("tweet", function(data){
            console.log(data);
            tweets.push(data);
            console.log(tweets);


            var circle = svgContainers.selectAll("circle")
                .data(tweets)
                .enter()
                .append("circle")
            
            var circleAttributes = circle
   
                .attr("r",30)
                .style("fill", "green")
                .attr("cy",function(d,i){
                    return i*100;
                })
                .attr("cx", 300)
            /*
            var x = d3.select("#main").selectAll("p")
            .data(tweets)
            .enter()
            .append("p")
            .text(function(d){return d.tweet;});  
            */
        });
